<!DOCTYPE html>
<html lang='en'>

<head>
  <title>GBG CAR</title>
</head>

<body>
  <p>Use the buttons below to turn the car's joystick on and off.</p>
  <button onclick='fetch("/activate");' style='font-size: 100px;'>GO</button>
  <button onclick='fetch("/deactivate");' style='font-size: 200px; float: right;'>STOP</button>
  <br>
  <div id="status" style="font-size: 50px;">status: </div>
</body>
<script>
  async function loop() {
    var errorTimeout;
    try {
      errorTimeout = setTimeout(() => {
        document.getElementById("status").innerHTML = "status: disconnected";
      }, 125);
      const text = await fetch('/status');
      document.getElementById("status").innerHTML = "status: " + text;
      clearTimeout(errorTimeout);
    } catch (e) {
      clearTimeout(errorTimeout);
      document.getElementById("status").innerHTML = "status: disconnected";
    }
  }
  setInterval(loop, 200);
</script>

</html>